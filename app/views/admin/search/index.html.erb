<% content_for :javascript do %>
  <%= javascript_pack_tag 'administrate' %>
<% end %>

<div id="preact-container--admin"></div>

<header class="main-content__header" role="banner">
  <%= form_with(
      url: global_search_assets_path,
      class: 'search global-search__form',
      html: { role: 'search' }
  ) do |f| %>
    <div class="global-search__form__query-bar">
      <label class="search__label" for="search">
        <svg class="search__eyeglass-icon" role="img">
          <title>
            Filter asset names
          </title>
          <use xlink:href="#icon-eyeglass"></use>
        </svg>
      </label>

      <input
        class="search__input global-search__input"
        id="search"
        type="search"
        name="search"
        placeholder="Filter asset names"
        value=""
      />

      <a class="search__clear-link global-search__form__clear-btn" href="/admin/search">
        <svg class="search__clear-icon" role="img">
          <title>Clear search</title>
          <use xlink:href="#icon-cancel"></use>
        </svg>
      </a>
    </div>

    <div class="global-search__form__filter-bar">
      <button class="filter-btn" id="tag-filter-btn">Tags</button>
      <button class="filter-btn" id="user-filter-btn">Held By</button>
      <button class="filter-btn" id="location-filter-btn">Location</button>
      <button class="filter-btn filter-btn--boolean filter-btn--active" id="checked-in-filter-btn">Checked In</button>
      <button class="filter-btn filter-btn--boolean" id="checked-out-filter-btn">Checked Out</button>
      <button class="filter-btn filter-btn--boolean" id="late-filter-btn">Out past estimated return</button>
      <a href="#" id="clear-filters-btn">Clear Filters</a>

      <div id="tag-tooltip" class="filter-tooltip__content">
        <%= f.select('tags', @tags, {}, id: 'tag-select', multiple: true) %>
      </div>

      <div id="user-tooltip" class="filter-tooltip__content">
        <%= f.select(
          'users',
          @users.collect { |u| [u.display_name || u.email, u.id] },
          {},
          id: 'user-select',
          multiple: true
        ) %>
      </div>

      <div id="location-tooltip" class="filter-tooltip__content">
        <%= f.select(
          'locations',
          @locations.collect { |l| ["#{l.event.name} - #{l.name}", l.id] },
          {},
          id: 'location-select',
          multiple: true
        ) %>
      </div>
    </div>
  <% end %>
</header>

<section class="main-content__body main-content__body--flush global-search__results">
  <div id="welcome-screen">
    <svg role="img">
      <title>🔎w🔍</title>
      <use xlink:href="#icon-eyeglass"></use>
    </svg>
    <p>
      This page lets you search for assets by name, checked in/out state, current location, etc.
    </p>
  </div>

  <div id="no-results-screen">
    <h2>ʕ ಡ ﹏ ಡ ʔ</h2>
    <p>no results :&lt;</p>
  </div>

  <table id="search-results" aria-labelledby="Search Results">
    <thead>
      <th
        class="cell-label cell-label--tag"
        scope="col"
        role="columnheader"
        width="90"
        style="text-align: center"
      >
        Tag
      </th>

      <th
        class="cell-label cell-label--asset-name"
        scope="col"
        role="columnheader"
      >
        Asset
      </th>

      <th
        class="cell-label cell-label--user"
        scope="col"
        role="columnheader"
      >
        Currently Held By
      </th>

      <th
        class="cell-label cell-label--location"
        scope="col"
        role="columnheader"
      >
        Current Location
      </th>
    </thead>

    <tbody id="search-results__body"></tbody>
  </table>
</section>
